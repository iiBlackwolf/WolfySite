<!DOCTYPE html>
<html lang="en" dir="ltr">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!--=============== BOXICONS ===============-->

     <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

     <!--=============== CSS ===============--> 

     <link rel="stylesheet" href="../css/style.css">

     <!--=============== ICON ===============--> 

     <link rel="icon" href="../assets/wolfy.png">

     <!--=============== TITLE ===============--> 

     <title>Wolfy</title>

     <!--=============== SCRIPT ===============--> 

     <script src="../javascript/jquery-3.5.1.js"></script>
     <script src="../javascript/navigators.js"></script>
     <script src="../javascript/main.js"></script>
   </head>
<body>
  <div class="sidebar">
    <div class="logo-details">
      <img src="../assets/wolfy.png" width="30" height="30" class="bx bxl-c-plus-plus icon">
        <div class="logo_name">WolfyBot</div>
        <i class='bx bx-menu' id="btn" ></i>
    </div>
      <li>
          <i class='bx bx-search' ></i>
         <input type="text" id="myInput" onkeyup="myFunction()" type="text" placeholder="Search...">
         <span class="tooltip">Search</span>
      </li>
      <ul class="nav-list" id="myUL">
        <li>
          <a href="../Home.html">
            <i class='bx bx-home' ></i>
            <span class="links_name">Home</span>
          </a>
           <span class="tooltip">Home page</span>
        </li>
      <li>
       <a href="#">
        <i class='bx bxs-server' ></i>
         <span class="links_name">Server Management</span>
       </a>
       <span class="tooltip">Server Management</span>
     </li>
     <li>
       <a href="#">
         <i class='bx bx-chat' ></i>
         <span class="links_name">Messages</span>
       </a>
       <span class="tooltip">Messages</span>
     </li>
     <li>
       <a href="pages/market.html">
         <i class='bx bxs-shopping-bags'></i>
         <span class="links_name">Market</span>
       </a>
       <span class="tooltip">Market</span>
     </li>
     <li>
       <a href="#">
        <i class='bx bx-command' ></i>
         <span class="links_name">Commands</span>
       </a>
       <span class="tooltip">Commands</span>
     </li>
     <li>
       <a href="#">
        <i class='bx bxs-contact' ></i>
         <span class="links_name">Contact</span>
       </a>
       <span class="tooltip">Contact</span>
     </li>
     <li>
       <a href="#">
         <i class='bx bx-heart' ></i>
         <span class="links_name">Saved</span>
       </a>
       <span class="tooltip">Saved</span>
     </li>
     <li>
       <a href="#">
         <i class='bx bx-cog' ></i>
         <span class="links_name">Settings</span>
       </a>
       <span class="tooltip">Settings</span>
     </li>
     <li class="profile">
         <div class="profile-details">
           <img src="../assets/user.png" alt="profileImg">
           <div class="name_job">
             <div class="name">Unkown User</div>
           </div>
           <div class="LOGIN">
            <a id="LOGIN" href="/">
            <i class='bx bx-log-out' id="log_out"></i>
            </a>
           </div>
         </div>
     </li> 
    </ul>
  </div>
  <section class="commands-section">

    <!--==================== HEADER ====================-->
    
    <nav class="nav-bar" id="header">
      <div class="nav-bar-img">
        <img src="../assets/wolfy.png" alt="">
        <h1>Wolfy</h1>
      </div>
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
      <div class="nav-bar-links">
        <ul>
          <!-- <a href="javascript:void(0);" class="icon" onclick="myFunction()">
            <i class='bx bx-menu'></i>
          </a> -->
          <li><a href="../Home.html">HOME</a></li>
          <li><a href="#" class="active">COMMANDS</a></li>
          <li><a href="#">MARKET</a></li>
          <li><a href="#">INVITE</a></li>
        </ul>
        <a href="javascript:void(0);" class="icon">
          <i class='bx bx-menu' id="oi" onclick="Show()"></i>
          <i class='bx bx-x' id="io" onclick="Hide()"></i>
        </a>
      </div>
    </nav>
    <div class="content-commands">
      <div class="commands-content">
        <h1>
          Wolfy's Commands List
        </h1>
        <p>
          View the commands for Wolfy.
        </p>
      </div>
      <div class="content-commands-container">
        <div class="content-commands-column-2">
          <div class="content-commands-column-2-left">
            <h1>Category</h1>
            <div class="content-commands-expand">
              <p> Expand / Hide all</p>
              <div class="switch">
                <input type="checkbox" class="checkbox-expand">
                <span class="slider"></span>
              </div>
            </div>
            <ul class="qa-menu-list">
              <li data-li="bot" class="col-2-btn">Bot</li>
              <li data-li="Economy" class="col-2-btn">Economy</li>
              <li data-li="Fun" class="col-2-btn">Fun</li>
              <li data-li="Informations" class="col-2-btn">Informations</li>
              <li data-li="Developer" class="col-2-btn">developer</li>
              <li data-li="Moderation" class="col-2-btn">Moderation</li>
              <li data-li="LeveledRoles" class="col-2-btn">LeveledRoles</li>
              <li data-li="setup" class="col-2-btn">Setup</li>
              <li data-li="Search" class="col-2-btn">Search</li>
              <li data-li="Utilities" class="col-2-btn">Utility</li>
            </ul>
          </div>
          <div class="content-commands-column-2-right">
            <div class="commands-search">
              <input class="search-box" type="text" name="command" required="true" formnovalidate>
              <label for="search" class="search-label">
                <span class="content-search"> Search </span>
              </label>
            </div>
            <div class="commands" id="commands-list">
              <div class="commands-still-loading"></div>
              <div class="commands-loading-failed">
                <h1>Error: Unable to Load Commands</h1>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <script>
  let sidebar = document.querySelector(".sidebar");
  let closeBtn = document.querySelector("#btn");
  let searchBtn = document.querySelector(".bx-search");

  closeBtn.addEventListener("click", ()=>{
    sidebar.classList.toggle("open");
    menuBtnChange();//calling the function(optional)
  });

  searchBtn.addEventListener("click", ()=>{ // Sidebar open when you click on the search iocn
    sidebar.classList.toggle("open");
    menuBtnChange(); //calling the function(optional)
  });

  // following are the code to change sidebar button(optional)
  function menuBtnChange() {
   if(sidebar.classList.contains("open")){
     closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");//replacing the iocns class
   }else {
     closeBtn.classList.replace("bx-menu-alt-right","bx-menu");//replacing the iocns class
   }
  }
  // Search script
function myFunction() {
    // Declare variables
    var input, filter, ul, li, a, i, txtValue;
    input = document.getElementById('myInput');
    filter = input.value.toUpperCase();
    ul = document.getElementById("myUL");
    li = ul.getElementsByTagName('li');
  
    // Loop through all list items, and hide those who don't match the search query
    for (i = 0; i < li.length; i++) {
      a = li[i].getElementsByTagName("a")[0];
      txtValue = a.textContent || a.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        li[i].style.display = "";
      } else {
        li[i].style.display = "none";
      }
    }
  }
    function Show() {
        let lists = document.querySelectorAll(".nav-bar-links > ul li")
        let oi = document.getElementById("oi")
        let io = document.getElementById("io")

        lists.forEach(list => {
          list.style.display = "block"
        })
        oi.style.display = "none";
        io.style.display = "block";
      }

      function Hide() {
        let lists = document.querySelectorAll(".nav-bar-links > ul li")
        let li = document.querySelector(".nav-bar-links ul")
        let oi = document.getElementById("oi")
        let io = document.getElementById("io")

        lists.forEach(list => {
          list.style.display = "none"
        })
        io.style.display = "none";
        oi.style.display = "block";
      }


      window.onload = () => {
        if (location.href.indexOf("code") !== -1) { // Detect if you logged in or not
                const code = location.href.substring(location.href.indexOf("code") + 5, location.href.length); // Get the code OAUTH gives you
                const req = new XMLHttpRequest(); // Create a new XMLHttpRequest
                req.open("POST", `http://localhost:${port}/user`); // Open the XMLHttpRequest;
                req.send(code); // Send the code in the request
                req.onload = () => { // Will run when the request is loaded
                    if (req.status === 500) { // Error
                        console.log(`There was an error with that. Please try logging in again. Error Code: ${req.status}`);
                    } else if (req.status === 200) { // Successful
                        console.log(req);
                    } else { // Other
                        console.log(`An error occured. Please try logging in again. Error Code: ${req.status}`);
                    }

                }
            }
const fragment = new URLSearchParams(window.location.hash.slice(1));
const [accessToken, tokenType] = [fragment.get('access_token'), fragment.get('token_type')];

if (!accessToken) {
  return document.getElementById('LOGIN').href = 'https://discord.com/api/oauth2/authorize?client_id=821655420410003497&redirect_uri=http%3A%2F%2Flocalhost%3A49681%2Fauth%2Fdiscord&response_type=token&scope=identify'
}

fetch('https://discord.com/api/users/@me', {
    headers: {
        authorization: `${tokenType} ${accessToken}`,
    },
})
.then(result => result.json())
.then(response => {
    console.log(response)
    const { username, discriminator, avatar, id} = response;
    //set the welcome username string
    document.getElementById('name').innerText = ` ${username}#${discriminator}`;

    //set the avatar image by constructing a url to access discord's cdn
    document.getElementById("avatar").src = `https://cdn.discordapp.com/avatars/${id}/${avatar}.jpg`;
})
.catch(console.error);
};

  </script>
</body>
</html>
